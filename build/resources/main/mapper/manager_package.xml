<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- writer: 이현서 -->
<mapper namespace="com.dodam.hotel.repository.interfaces.PackageRepository">
    <!-- package -->
    <resultMap id="Package" type="com.dodam.hotel.repository.model.managertest.PackageTB">
        <id property="id" column="id" />
        <result property="price" column="price" />
        <association property="room" column="room_id" javaType="com.dodam.hotel.repository.model.managertest.Room" resultMap="roomResult"/>
        <association property="dining" column="dining_id" javaType="com.dodam.hotel.repository.model.managertest.Dining" resultMap="diningResult"/>
        <association property="spa" column="spa_id" javaType="com.dodam.hotel.repository.model.managertest.Spa" resultMap="spaResult"/>
        <association property="pool" column="pool_id" javaType="com.dodam.hotel.repository.model.managertest.Pool" resultMap="poolResult"/>
        <association property="fitness" column="fitness_id" javaType="com.dodam.hotel.repository.model.managertest.Fitness" resultMap="fitnessResult"/>
    </resultMap>
    <!-- room -->
    <resultMap id="roomResult" type="com.dodam.hotel.repository.model.managertest.Room">
        <id property="id" column="room_id" />
        <result property="name" column="room_name"/>
        <result property="price" column="room_price"/>
        <result property="availability" column="room_availability"/>
        <result property="description" column="room_description"/>
        <result property="image" column="room_image"/>
        <result property="statusDesc" column="room_status_desc"/>
        <result property="numberOfp" column="room_number_of_p"/>
    </resultMap>
    <!-- dining -->
    <resultMap id="diningResult" type="com.dodam.hotel.repository.model.managertest.Dining">
        <id property="id" column="dining_id" />
        <result property="name" column="dining_name"/>
        <result property="hours" column="dining_hours"/>
        <result property="location" column="dining_location"/>
        <result property="availability" column="dining_availability"/>
        <result property="statusDesc" column="dining_statusDesc"/>
        <result property="image1" column="dining_image1"/>
        <result property="image2" column="dining_image2"/>
        <result property="image3" column="dining_image3"/>
    </resultMap>

    <!-- spa -->
    <resultMap id="spaResult" type="com.dodam.hotel.repository.model.managertest.Spa">
        <id property="id" column="spa_id" />
        <result property="hours" column="spa_hours"/>
        <result property="availability" column="spa_availability"/>
        <result property="statusDesc" column="spa_status_desc"/>
        <result property="image" column="spa_image"/>
    </resultMap>

    <!-- pool -->
    <resultMap id="poolResult" type="com.dodam.hotel.repository.model.managertest.Pool">
        <id property="id" column="pool_id" />
        <result property="hours" column="pool_hours"/>
        <result property="availability" column="pool_availability"/>
        <result property="statusDesc" column="pool_status_desc"/>
        <association property="facilities" column="facilities_id" javaType="com.dodam.hotel.repository.model.managertest.Facilities" resultMap="faciltiesResult" />
    </resultMap>

    <!-- fitness -->
    <resultMap id="fitnessResult" type="com.dodam.hotel.repository.model.managertest.Fitness">
        <id property="id" column="id" />
        <result property="hours" column="fitness_hours"/>
        <result property="availability" column="fitness_availability"/>
        <result property="statusDesc" column="fitness_status_desc"/>
        <result property="image" column="fitness_image"/>
        <association property="facilities" column="facilities_id" javaType="com.dodam.hotel.repository.model.managertest.Facilities" resultMap="faciltiesResult" />
    </resultMap>

    <!-- facilities -->
    <resultMap id="faciltiesResult" type="com.dodam.hotel.repository.model.managertest.Facilities">
        <id property="id" column="id"/>
        <result property="location" column="location" />
        <result property="name" column="name" />
        <result property="image1" column="image1" />
        <result property="image2" column="image2" />
        <result property="image3" column="image3" />
    </resultMap>



<!--    <select id="findPackage" resultType="com.dodam.hotel.repository.model.managertest.PackageTB">-->
<!--        select * from package_tb;-->
<!--    </select>-->

    <select id="findAllPackage" resultMap="Package">
        select p.*,

               r.id as room_id,
               r.name as room_name,
               r.price as room_price,
               r.availability as room_availability,
               r.description as room_description,
               r.image as room_image,
               r.status_desc as room_status_desc,
               r.number_of_p as room_number_of_p,

               d.id as dining_id,
               d.name as dining_name,
               d.hours as dining_hours,
               d.location as dining_location,
               d.availability as dining_availability,
               d.status_desc as dining_status_desc,
               d.image1 as dining_image1,
               d.image2 as dining_image2,
               d.image3 as dining_image3,

               p.id as pool_id,
               p.hours as pool_hours,
               p.availability as pool_availability,
               p.status_desc as pool_status_desc,

               s.id as spa_id,
               s.hours as spa_hours,
               s.availability as spa_availability,
               s.status_desc as spa_status_desc,

               f.id as fitness_id,
               f.hours as fitness_hours,
               f.availability as fitness_availability,
               f.status_desc as fitness_status_desc
        from package_tb as pack
            left join room_tb as r
                on pack.room_id = r.id
            left join dining_tb as d
                on pack.dining_id = d.id
            left join pool_tb as p
                on pack.pool_id = p.id
            left join spa_tb as s
                on pack.spa_id = s.id
            left join fitness_tb as f
                on pack.fitness_id = f.id;


    </select>
    <select id="findPackageList" resultType="com.dodam.hotel.repository.model.managertest.PackageTB">
        select * from package_tb;
    </select>
<!--
        insert into
            dining_tb(name, description, location, availability, status_desc, image)
               values ("test", "test", "test", true, "test", null)
-->
</mapper>
