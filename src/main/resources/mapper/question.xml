<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dodam.hotel.repository.interfaces.QuestionRepository">
	<resultMap type="com.dodam.hotel.repository.model.Question" id="Question">
		<result column="id" property="id"/>
		<result column="title" property="title"/>
		<result column="content" property="content"/>
		<result column="created_at" property="createdAt"/>
		<result column="category" property="category"/>
		<result column="file" property="file"/>
		<result column="status" property="status"/>
		<collection property="user" resultMap="User"></collection>
	</resultMap>
	
	<resultMap type="com.dodam.hotel.repository.model.User" id="User">
		<result column="id" property="id"/>
		<result column="email" property="email"/>
		<result column="password" property="password"/>
		<result column="name" property="name"/>
		<result column="gender" property="gender"/>
		<result column="birth" property="birth"/>
		<result column="tel" property="tel"/>
		<result column="blacklist" property="blacklist"/>
		<result column="withdrawal" property="withdrawal"/>
		<result column="created_at" property="createdAt"/>
	</resultMap>
	
	<insert id="insertQuestion">
		insert into question_tb(title, content, user_id, category, upload_file, origin_file)
		values
			(#{title}, #{content}, #{userId}, #{category}, #{uploadFile}, #{originFile});
	</insert>
	
	<select id="selectQuestionByUserId" resultMap="Question">
		select q.*
		from question_tb as q
		inner join user_tb as u
		on q.user_id = u.id
		where user_id = #{userId}
	</select>
</mapper>
