<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dodam.hotel.repository.interfaces.QuestionRepository">
	
	<resultMap type="com.dodam.hotel.repository.model.TestQuestion" id="Question">
		<result column="id" property="id"/>
		<result column="title" property="title"/>
		<result column="content" property="content"/>
		<result column="user_id" property="userId"/>
		<result column="created_at" property="createdAt"/>
		<result column="category" property="category"/>
		<result column="origin_file" property="originFile"/>
		<result column="upload_file" property="uploadFile"/>
		<result column="status" property="status"/>
	</resultMap>
	
	<resultMap type="com.dodam.hotel.repository.model.TestReply" id="Reply">
	 	<result column="id" property="id"/>
		<result column="content" property="content"/>
		<result column="question_id" property="questionId"/>
		<result column="manager_id" property="managerId"/>
		<association property="question" resultMap="Question"/>
	</resultMap>
	
	<select id="findAll" resultMap="Reply">
		select r.content,r.manager_id, q.*
		from reply_tb as r
		join question_tb as q
		on q.id = r.question_id
		where question_id = #{id};
	</select>
	
	<select id="findAllQuestion" resultType="com.dodam.hotel.repository.model.TestQuestion">
		select *
		from question_tb;
	</select>
	
	<select id="findById" resultType="com.dodam.hotel.repository.model.TestQuestion">
		select *
		from question_tb
		where id = #{id};
	</select>
	
	<update id="updateById">
		UPDATE question_tb
        SET status = true 
        WHERE id=#{id};
	</update>

	
	
</mapper>